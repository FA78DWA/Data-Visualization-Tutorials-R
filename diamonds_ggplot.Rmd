---
title: "Practice the ggplot2 Library"
output:
  md_document:
    variant: markdown_github
---
# 1- load the library, and the diamonds dataset
## Note that ggplot works in layers, meaning that we can plot the data and put different layers on top of the plot. This is done by using the (+) sign
```{r}
library(ggplot2)
data("diamonds")
head(diamonds)
```

# 2- Scatter Plot
## Simple scatter plot between the "carat" and the "price"
```{r}
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + ggtitle("Scatter plot") + xlab("carat (weight)") 
```

## Add additional feature in the plot by using color, for example add "clarity"
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_point() + ggtitle("Scatter plot") + xlab("carat (weight)") 
```

## What about the "cut", can we add it too...Yes by the point shape
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity, shape=cut)) + geom_point() + ggtitle("Scatter plot") + xlab("carat (weight)") 
```

## Or the point size, but as we can see, its not a good idea for this dense data 
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity, size=cut)) + geom_point() + ggtitle("Scatter plot") + xlab("carat (weight)") 
```

## We can add a smooth curve (additional layer) to show the general trend of the data. Don't forget, we do this by the (+) sign.
```{r}
# the gray area around the curve is the confidence interval. 
#To turn it off we can turn off the standard error option in geo_smooth(next figure).
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + geom_smooth() 
```

```{r}
# Remove the confidence area around the curve
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + geom_smooth(se=FALSE) 
```

## We also can add the best fit line for that data, by changing the method that geom_smooth is using.
```{r}
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + geom_smooth(se=FALSE, method="lm") 
```

## We can get a smooth curve that represnts the data with respect to a specific feature rather than a one curve for all the data. For example see the data curves wrt clarity. To do that, add "color = clarity" in the "aes()"
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_point() + geom_smooth(se=FALSE)
```

## We can only show the curves layer without the scattered points, by simply removing the "geom_point()" layer. 
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_smooth(se=FALSE)
```

## We can do the same using lines ....
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_point() + geom_smooth(se=FALSE, method = "lm")
```

```{r}
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) + geom_smooth(se=FALSE, method = "lm")
```

# 3- Using Faceting
## Faceting is to divide the plot into smaller ones wrt some attribute/feature. Back to the original scatter plot.
```{r}
ggplot(diamonds, aes(x=carat, y=price, color = clarity)) + geom_point()
```

## We can divide it into smaller scatter plots in terms of "clarity" by adding the "facet_wrap()" layer, and specifiny the feature that we want to use to divide the plot, in this case "~clarityS". Note that, clarity is a measurement of how clear the diamond is (I1 (worst), SI1, SI2, VS1, VS2, VVS1, VVS2, IF (best))
```{r}
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + facet_wrap(~clarity) 
```

## We can also use scatter plot "color", to visualize an additional feature. For example, the diamond color "color" , from J (worst) to D (best). Don't get confused between the two "color", one is the plot method, and the other is just a feature from the dataset.
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=color)) + geom_point() + facet_wrap(~clarity)
```

## What if we want to DIVIDE the big plot into smaller one using two features(clarity & color) instead of one(color only). Use facet_grid(color~clarity). "color~clarity" means color explaned by clarity.
```{r}
ggplot(diamonds, aes(x=carat, y=price)) + geom_point() + facet_grid(color~clarity)
```

## We can also add the "cut" feature to this mega plot, do you know how....Yes, use color, or shape, or size for the scattered points. We will use "color". Note, this plot has "carat" on the x-axis, "price" on the y-axis, has 8*7 subplots to specify the different "clarities" and "colors", also has a colored points to see the different "cuts". 5 Features in one plot. Amazing ha.
```{r}
ggplot(diamonds, aes(x=carat, y=price, color=cut)) + geom_point() + facet_grid(color~clarity)
```

